
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Website Carbon API</title>

        <style>

            * {
                box-sizing: border-box;
            }

            html {
                padding: 0;
                scroll-behavior: smooth;
            }

            body {
                padding: 0;
                margin: 0;
                font-family: sans-serif;
                background: aliceblue;
                color: #191919;
                line-height: 1.5;
            }

            header, main, footer {
                padding: 3rem 1rem 1rem;
            }

            header > *, main > *, footer > *, .notice {
                max-width: 43rem;
                margin: 0 auto;
            }

            main {
                display: flow-root;
            }

            header, footer {
                display: flow-root;
            }

            header {
                background: white;
            }

            footer {
                padding: 0.8rem 0;
                background: midnightblue;
                color: ghostwhite;
                text-align: center;
                font-size: 0.9em;
            }

            footer a {
                color: inherit;
            }

            h1, h2, h3, h4, h5 {
                margin-top: 2.5rem;
                margin-bottom: 0.5rem;
                color: midnightblue;
                letter-spacing: 0.5px;
            }

            h1 em, h2 em, h3 em, h4 em, h5 em {
                font-style: normal;
            }

            h1 {
                font-size: 2.7em;
            }

            h2 {
                font-size: 1.9em;
            }

            h3 {
                display: block;
                width: 100%;
                padding-top: 0.5rem;
                border-top: 1px solid mediumvioletred;
                color: mediumvioletred;
                font-size: 1.5em;
            }

            h4 {
                font-size: 1.2em;
            }
            
            h1 + *, h2 + *, h3 + *, h4 + *, h5 + * {
                margin-top: 0;
            }

            ul {
                padding-left: 1.2em;
            }

            ul li {
                margin: 0.3rem 0;
            }

            li::marker {
                color: midnightblue;
            }
            
            section {
                padding: 0;
                margin-bottom: 0.5rem;
            }

            section:not(:first-of-type) {
                margin-top: 2.5rem;
                border-top: 3px dashed midnightblue;  
            }

            section:not(:first-of-type) h2 {
                margin-top: 1rem;
            }

            p {
                margin: 1.1rem auto;
            }

            a {
                color: mediumvioletred;
                text-underline-offset: 2px;
            }

            a:hover {
                text-decoration-style: double;
            }

            pre {
                padding: 0.85rem 1.23rem;
                margin: 1rem 0;
                border: 1px dashed midnightblue;
                border-radius: 19px;
                background: ghostwhite;
                color: midnightblue;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            code {
                font-size: 1.05em;
                font-family: monospace;
            }

            .emoji {
                font-size: 1.5em;
            }

            .notice {
                display: flex;
                gap: 1rem;
                padding: 1.1rem 1.5rem;
                margin: 1rem auto;
                border: 1px dashed chocolate;
                border-radius: 19px;
                background: seashell;
                color: chocolate;
                font-size: 1.1em;
                letter-spacing: 0;
                font-family: monospace;
            }

            .notice a {
                color: inherit;
            }

            .notice *:first-child {
                margin-top: 0;
            }

            .notice *:last-child {
                margin-bottom: 0;
            }

            .notice--large {
                align-items: center;
                padding-top: 0.5rem;
                padding-bottom: 0.5rem;
                font-size: 1.5em;
                letter-spacing: 1px;
            }

            .notice .emoji {
                font-size: 2.2em;
            }

            dl {
                padding: 1.23rem;
                border-radius: 19px;
                background: white;
                color: midnightblue;
                border: 1px solid midnightblue;
            }

            .dl--green {
                border-color: seagreen;
            }

            dt {
                display: flex;
                flex-flow: row wrap;
                align-items: center;
                font-weight: bold;
                font-size: 1.1em;
                padding-top: 0.3rem;
                margin-bottom: 0.5rem;
            }

            dt:not(:first-child) {
                padding-top: 1rem;
                margin-top: 1rem;
                border-top: 1px solid currentColor;
            }

            dt .label {
                margin-left: 0.6rem;
            }

            dd {
                font-size: 0.9em;
            }

            dd dl {
                border-style: dashed;
                border-radius: 6px;
            }

            .dd-desc *:first-child {
                margin-top: 0;
            }

            .dd-desc *:last-child {
                margin-bottom: 0;
            }

            .label {
                display: inline-block;
                margin: 0 0.5ch;
                padding: 0 0.3rem;
                background: midnightblue;
                color: white;
                border-radius: 4px;
                font-size: 0.85rem;
                font-weight: bold;
                vertical-align: middle;
            }

            .label--warning {
                background: chocolate;
            }

            .label ~ .label {
                margin-left: 0.3rem;
            }

            .screen-reader-text {
                border: 0;
                clip: rect(1px, 1px, 1px, 1px);
                clip-path: inset(50%);
                height: 1px;
                margin: -1px;
                overflow: hidden;
                padding: 0;
                position: absolute;
                width: 1px;
                word-wrap: normal !important;
            }

        </style>
    </head>
    <body>
        <header>
            <h1>Website Carbon API</h1>
        </header>

        <main>

            <p class="notice notice--large"><span class="emoji">&#128119;</span><strong>// Documentation in progress|</strong></p>
            
            <section id="background">
                <h2>How is your website impacting the planet? </h2>
                <p>The internet consumes a lot of electricity. 416.2TWh per year to be precise. To give you some perspective, thatâ€™s more than the entire United Kingdom.</p>
                <p>From data centres to transmission networks to the devices that we hold in our hands, it is all consuming electricity, and in turn producing carbon emissions.</p>
                <p>For more information about how we calculate the carbon emissions take a look at <a href="https://www.websitecarbon.com/how-does-it-work/">the <em>How does it work?</em> part of our Website Carbon Calculator site</a>.</p>
            </section>
            
            <section id="endpoints">
                <h2>Public Endpoints</h2>

                <div class="notice">
                    <span class="emoji">&#128587;</span>

                    <div>
                        <p>We're making some changes to the API behind the scenes, so these endpoints and their responses are subject to change.</p>
                        <p>If you're utilising the API please let us know via <a href="mailto:websitecarbon@wholegraindigital.com">websitecarbon@wholegraindigital.com</a> so we can keep you in the loop with any changes that might impact your work.</p>
                        <p>(We'd also love to hear what you're cooking up with it!)</p>
                    </div>
                </div>
            
                <ul>
                    <li>
                        <a href="#site-endpoint">/site</a>
                    </li>
                    <li>
                        <a href="#data-endpoint">/data</a>
                    </li>
                </ul>

                <h3 id="site-endpoint">The Site Endpoint: <em>/site</em></h3>
                <code>/site?url={xxx}</code>
                <p>This endpoint requires a URL parameter and will run a test in real time to calculate the carbon emissions generated per page view.</p>
                <p>This endpoint is cached and will only test the same URL once every 24 hours.</p>

                <h4>Accepted Parameters</h4>

                <dl>
                    <dt>url <span class="screen-reader-text">as a </span><span class="label">string</span><span class="screen-reader-text"> that is </span><span class="label label--warning">required</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>The URL of the page you want to test.</p>
                            <p>The URL should have the protocol included, and be URL encoded.</p>
                        </div>
                    </dd>
                </dl>

                <h4>Successful Response</h4>

                <dl class="dl--green">
                    <dt>url <span class="screen-reader-text">as a </span><span class="label">string</span></dt>

                    <dd>
                        <div class="dd-desc">
                            <p>The URL that has been tested.</p>

                            <p>In some cases this may differ from the URL you've provided, e.g. in the case of a redirect, or if it contains disallowed parameters.</p>
                        </div>
                    </dd>

                    <dt>green <span class="screen-reader-text">as a </span><span class="label">boolen</span><span class="screen-reader-text"> or </span><span class="label">string "unknown"</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>Whether or not we could establish hosting of the website as being "green".</p>
                            
                            <p>We work with <a href="https://www.thegreenwebfoundation.org/">The Green Web Foundation</a> to get this information.</p>

                            <p>If the green hosting status can't be established this will return a string with a value of <strong>unknown</strong>.</p>
                        </div>
                    </dd>

                    <dt>bytes <span class="screen-reader-text">as an </span><span class="label">integer</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>The number of bytes transferred during the page load.</p>
                        </div>
                    </dd>

                    <dt>cleanerThan <span class="screen-reader-text">as a </span><span class="label">number</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>A numeric value between 0 and 1 representing the percentage of tested resources this is cleaner than.</p>

                            <p>This is based on the CO<sub>2</sub> value. See the <a href="#response-statistics-co2">co2 property of the Statistics object</a>.</p>
                        </div>
                    </dd>

                    <dt>statistics <span class="screen-reader-text">as an </span><span class="label">object</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>See <a href="#response-statistics">The Statistics Object</a>.</p>
                        </div>
                    </dd>
                </dl>
                
                <h4>Example Valid Request</h4>
                <pre><code>https://api.websitecarbon.com/site?url=https%3A%2F%2Fwww.wholegraindigital.com%2F</code></pre>
                
                <h4>Example Successful Response</h4>

                <pre><code>{
    "url": "https://www.wholegraindigital.com/",
    "green": true,
    "bytes": 443854,
    "cleanerThan": 0.83,
    "statistics": {
        "adjustedBytes": 335109.77,
        "energy": 0.0005633320052642376,
        "co2": {
            "grid": {
                "grams": 0.26758270250051286,
                "litres": 0.14882949913078525
            },
            "renewable": {
                "grams": 0.24250694721722435,
                "litres": 0.13488236404222018
            }
        }
    }
}</code></pre>

                <h3 id="data-endpoint">The Data Endpoint: <em>/data</em></h3>
                <code>/data?bytes={0000000}&green={1/0}</code>
                <p>An endpoint to calculate the emissions of a page by manually passing the bytes and whether or not it is powered by green hosting.</p>

                <h4>Accepted Parameters</h4>

                <dl>
                    <dt>bytes <span class="screen-reader-text">as an </span><span class="label">integer</span><span class="screen-reader-text"> that is </span><span class="label label--warning">required</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>The number of bytes transferred by the page on load.</p>
                        </div>
                    </dd>
                    <dt>green <span class="screen-reader-text">as an </span><span class="label">integer</span><span class="screen-reader-text"> that is </span><span class="label label--warning">required</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>Whether the site is using environmentally sustainable hosting.</p>

                            <p>This should be either 1 (if it is using green hosting) or 0 (if it is not using green hosting).</p>
                        </div>
                    </dd>
                    <dt>legacy <span class="screen-reader-text">as an </span><span class="label">integer</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>A flag to attempt to use calculations based on an outdated methodology.</p>

                            <p>Currently the only valid value for this is 2, relating to the methodology and calculations being used up to 19 April 2022.</p>

                            <p>Details about the current methodology can be found in in <a href="https://www.websitecarbon.com/how-does-it-work/">the <em>How does it work?</em> part of our Website Carbon Calculator site</a>.</p>
    
                            <p>If you'd like more information about the legacy methodologies and our support for them, send us a message to <a href="mailto:websitecarbon@wholegraindigital.com">websitecarbon@wholegraindigital.com</a>.
                        </div>
                    </dd>
                </dl>

                <h4>Successful Response</h4>

                <dl class="dl--green">
                    <dt>cleanerThan <span class="screen-reader-text">as a </span><span class="label">number</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>A numeric value between 0 and 1 representing the percentage of tested resources this is cleaner than.</p>

                            <p>This is based on the CO<sub>2</sub> value. See the <a href="#response-statistics-co2">co2 property of the Statistics object</a>.</p>
                        </div>
                    </dd>

                    <dt>statistics <span class="screen-reader-text">as an </span><span class="label">object</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>See <a href="#response-statistics">The Statistics Object</a>.</p>
                        </div>
                    </dd>
                </dl>
                
                <h4>Example Valid Request</h4>
                <pre><code>https://api.websitecarbon.com/data?bytes=1000&green=1</code></pre>
                
                <h4>Example Successful Response</h4>

                <pre><code>{
    "statistics": {
        "adjustedBytes": 755,
        "energy": 0.0000012691831216216086,
        "co2": {
            "grid": {
                "grams": 0.000602861982770264,
                "litres": 0.0003353118348168209
            },
            "renewable": {
                "grams": 0.0005463664791062474,
                "litres": 0.0003038890356788948
            }
        }
    },
    "cleanerThan": 1
}</code></pre>

                <h3 id="response-statistics">The Statistics Object</h3>

                <p>The statistics object returned as part of some responses is a result of the calculations performed by the API.</p>

                <p>You can find out more about these calculations in <a href="https://www.websitecarbon.com/how-does-it-work/">the <em>How does it work?</em> part of our Website Carbon Calculator site</a>.</p>

                <dl>
                    <dt>adjustedBytes <span class="screen-reader-text">as a </span><span class="label">number</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>The approximate number of bytes transferred by the page load, adjusted to take first time vs returning visitor percentage into account.</p>
                        </div>
                    </dd>
                    
                    <dt>energy <span class="screen-reader-text">as a </span><span class="label">number</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>The approximate amount of energy transferred on each page load in KW<sub>g</sub>.</p>
                        </div>
                    </dd>

                    <dt id="response-statistics-co2">co2 <span class="screen-reader-text">as an </span><span class="label">object</span></dt>
                    <dd>
                        <div class="dd-desc">
                            <p>An object containing data on the amount of CO<sub>2</sub> transferred on each page load.</p>

                            <p>This is often offered as two separate options, <strong>renewable</strong> and <strong>grid</strong>. These relate to whether the energy is renewable or from the national grid respectively; <strong>you should use one or the other</strong>.</p>
                            
                            <p>The value of both the renewable and grid options is an <span class="label">object</span>:</p>

                            <dl>
                                <dt>grams <span class="screen-reader-text">as a </span><span class="label">number</span></dt>
                                <dd>
                                    <div class="dd-desc">
                                        <p>The approximate amount of CO<sub>2</sub> transferred on each page load in grams</p>
                                    </div>
                                </dd>
                                
                                <dt>litres <span class="screen-reader-text">as a </span><span class="label">number</span></dt>
                                <dd>
                                    <div class="dd-desc">
                                        <p>The approximate amount of CO<sub>2</sub> transferred on each page load in litres</p>
                                    </div>
                                </dd>
                            </dl>
                        </div>
                    </dd>
                </dl>
            </section>

            <section>
                <h2>The Website Carbon Calculator</h2>
                <p>This API powers <a href="https://www.websitecarbon.com/">https://www.websitecarbon.com/</a>.</p>
            </section>
        </main>
        
        <footer>
            <p>Built and maintained by <a href="https://www.wholegraindigital.com">Wholegrain Digital</a> <span class="emoji">&#127793;</span></p>
        </footer>
    </body>
</html>
